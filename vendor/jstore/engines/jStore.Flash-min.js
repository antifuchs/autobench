/*
 * jStore Flash Storage Engine
 * Copyright (c) 2009 Eric Garside (http://eric.garside.name)
 * jStore.swf Copyright (c) 2008 Daniel Bulli (http://www.nuff-respec.com)
 */
(function(b){var a=b.jStore.Availability.flash=function(){return !!(window.swfobject&&jQuery.hasFlash("8.0.0"))};this.jStoreFlash=StorageEngine.extend({init:function(e,d){this._super(e,d);this.type="Flash";var c=this;b.jStore.flashReady(function(){c.flashReady()})},connect:function(){var c="jstore-flash-"+this.project;b("<div></div>").css({position:"absolute",left:-100000}).attr("id",c).appendTo(document.body).flash({src:b.jStore.defaults.flash,width:1,height:1},{version:"8.0.0"})},flashReady:function(c){this.db=b("embed","#jstore-flash-"+this.project)[0];this.delegate.triggerHandler("engine-ready",[this])},isAvailable:a,get:function(d){var c=this.db.f_get_cookie(d);return c=="null"?null:c},set:function(c,d){this.db.f_set_cookie(c,d);return d},rem:function(c){var d=this.get(c);this.db.f_delete_cookie(c);return d}});b.jStore.Engines.flash=jStoreFlash})(jQuery);function flash_ready(){$.jStore.delegate.triggerHandler("flash-ready")}(function(){var c;c=jQuery.fn.flash=function(f,g,i,d){var e=i||c.replace;g=c.copy(c.pluginOptions,g);if(!c.hasFlash(g.version)){if(g.expressInstall&&c.hasFlash(6,0,65)){var h={flashvars:{MMredirectURL:location,MMplayerType:"PlugIn",MMdoctitle:jQuery("title").text()}}}else{if(g.update){e=d||c.update}else{return this}}}f=c.copy(c.htmlOptions,h,f);return this.each(function(){e.call(this,c.copy(f))})};c.copy=function(){var e={},f={};for(var d=0;d<arguments.length;d++){var g=arguments[d];if(g==undefined){continue}jQuery.extend(e,g);if(g.flashvars==undefined){continue}jQuery.extend(f,g.flashvars)}e.flashvars=f;return e};jQuery.hasFlash=c.hasFlash=function(){if(/hasFlash\=true/.test(location)){return true}if(/hasFlash\=false/.test(location)){return false}var e=c.hasFlash.playerVersion().match(/\d+/g);var d=String([arguments[0],arguments[1],arguments[2]]).match(/\d+/g)||String(c.pluginOptions.version).match(/\d+/g);for(var f=0;f<3;f++){e[f]=parseInt(e[f]||0);d[f]=parseInt(d[f]||0);if(e[f]<d[f]){return false}if(e[f]>d[f]){return true}}return true};c.hasFlash.playerVersion=function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(d){return"6,0,0"}}catch(d){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(d){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(d){}}return"0,0,0"};c.htmlOptions={height:240,flashvars:{},pluginspage:"http://www.adobe.com/go/getflashplayer",src:"#",type:"application/x-shockwave-flash",width:320};c.pluginOptions={expressInstall:false,update:true,version:"6.0.65"};c.replace=function(d){this.innerHTML='<div class="alt">'+this.innerHTML+"</div>";jQuery(this).addClass("flash-replaced").prepend(c.transform(d))};c.update=function(e){var f=String(location).split("?");f.splice(1,0,"?hasFlash=true&");f=f.join("");var d='<p>This content requires the Flash Player. <a href="http://www.adobe.com/go/getflashplayer">Download Flash Player</a>. Already have Flash Player? <a href="'+f+'">Click here.</a></p>';this.innerHTML='<span class="alt">'+this.innerHTML+"</span>";jQuery(this).addClass("flash-update").prepend(d)};function a(){var d="";for(var e in this){if(typeof this[e]!="function"){d+=e+'="'+this[e]+'" '}}return d}function b(){var d="";for(var e in this){if(typeof this[e]!="function"){d+=e+"="+encodeURIComponent(this[e])+"&"}}return d.replace(/&$/,"")}c.transform=function(d){d.toString=a;if(d.flashvars){d.flashvars.toString=b}return"<embed "+String(d)+"/>"};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}})}})();